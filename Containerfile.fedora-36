FROM docker.io/fedora:36

RUN dnf upgrade -y
RUN dnf install -y --setopt=install_weak_deps=False \
    cjson-devel \
    clang \
    clang-tools-extra \
    cmake \
    doxygen \
    gcc \
    gcc-c++ \
    git \
    gperftools-devel \
    HdrHistogram_c-devel \
    java-latest-openjdk-devel \
    libasan \
    libbsd-devel \
    libbson-devel \
    libcurl-devel \
    libmicrohttpd-devel \
    libpmem-devel \
    libtsan \
    libubsan \
    libyaml-devel \
    lz4-devel \
    maven \
    mongo-c-driver-devel \
    ncurses-devel \
    ninja-build \
    python3-Cython \
    python3-devel \
    python3-pip \
    userspace-rcu-devel \
    which \
    xxhash-devel
RUN python3 -m pip install meson==0.62.2
RUN ulimit -c unlimited
